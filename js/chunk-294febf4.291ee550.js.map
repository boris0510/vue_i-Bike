{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/background/Orders.vue","webpack:///./src/views/background/Orders.vue?60e7"],"names":["DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","this","match","error","class","width","id","tabindex","role","aria-labelledby","aria-hidden","ref","type","data-bs-dismiss","aria-label","active","isLoading","orders","item","key","is_paid","$filters","date","create_at","user","email","products","product","i","title","qty","unit","currency","total","openOrderModal","openDelModal","pages","pagination","getOrders","tempOrder","final_total","name","tel","address","message","delOrder","components","Pagination","data","isNew","orderModal","delOrderModal","methods","Page","api","$http","then","response","success","delete","emitter","emit","status","hide","show","created","mounted","$refs","render"],"mappings":"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","file":"js/chunk-294febf4.291ee550.js","sourcesContent":["var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<template>\n  <div class=\"orders mt-4\">\n    <Loading v-model:active=\"isLoading\"/>\n    <div class=\"table-responsive-lg mt-4\">\n      <table class=\"table table-striped lh-lg\">\n        <thead class=\"table-dark\">\n          <tr class=\"table-nowrap\">\n            <th width=\"150\" class=\"text-center\">購買時間</th>\n            <th width=\"200\" class=\"text-center\">訂單編號</th>\n            <th width=\"200\" class=\"text-center\">Email</th>\n            <th class=\"text-center\">購買項目</th>\n            <th width=\"150\" class=\"text-end\">應付金額</th>\n            <th width=\"150\" class=\"text-center\">是否付款</th>\n            <th width=\"180\" class=\"text-center\">編輯</th>\n          </tr>\n        </thead>\n        <tbody class=\"text-center\">\n          <tr\n            class=\"table-nowrap\"\n            v-for=\"(item, key) in orders\"\n            :key=\"key\"\n            :class=\"{ 'text-black-50': !item.is_paid }\"\n          >\n            <td>{{ $filters.date(item.create_at) }}</td>\n            <td>{{ item.id }}</td>\n            <td><span v-text=\"item.user.email\" v-if=\"item.user\"></span></td>\n            <td>\n              <ul class=\"list-unstyled\">\n                <li v-for=\"(product, i) in item.products\" :key=\"i\">\n                  {{ product.product.title }} {{ product.qty }}\n                  {{ product.product.unit }}\n                </li>\n              </ul>\n            </td>\n            <td class=\"text-end\">NT$ {{ $filters.currency(item.total) }}</td>\n            <td>\n              <span v-if=\"item.is_paid\" class=\"text-strong\">已付款</span>\n              <span v-else class=\"text-muted\">尚未付款</span>\n            </td>\n            <td>\n              <button\n                type=\"button\"\n                class=\"btn btn-dark btn-hover rounded-0 me-2\"\n                @click=\"openOrderModal(item)\"\n              >\n                查看詳細\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-outline-dark btn-hover rounded-0\"\n                @click=\"openDelModal(item)\"\n              >\n                刪除\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <!-- 分頁 -->\n    <Pagination :pages=\"pagination\" @emit-pages=\"getOrders\"/>\n    <!-- orderModal -->\n    <div class=\"modal fade\" id=\"orderModal\" tabindex=\"-1\" role=\"dialog\"\n        aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"orderModal\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header bg-dark text-white\">\n            <h4 class=\"modal-title fw-bold\" id=\"exampleModalLabel\">訂單資訊 <span class=\"fs-6\">( {{ tempOrder.id }} )</span></h4>\n            <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            <div class=\"mb-3\">\n              <h5 class=\"fw-bold\">訂購日期</h5>\n              <p>{{ $filters.date(tempOrder.create_at) }}</p>\n              <hr>\n            </div>\n            <div class=\"mb-3\">\n              <h5 class=\"fw-bold\">商品</h5>\n              <div v-for=\"item in tempOrder.products\" :key=\"item.id\">\n                <div class=\"row\">\n                  <div class=\"col-6\">\n                    <p>{{ item.product.title }} {{ item.qty }} {{ item.product.unit }}</p>\n                  </div>\n                  <div class=\"col-6\">\n                    <p class=\"text-end\">NT$ {{ $filters.currency(item.final_total) }} 元</p>\n                  </div>\n                </div>\n              </div>\n              <p class=\"text-end\">總價: NT$ {{ $filters.currency(tempOrder.total) }} 元</p>\n              <hr>\n            </div>\n            <div class=\"mb-3\">\n              <h5 class=\"fw-bold\">Email</h5>\n              <p>{{ tempOrder.user.email }}</p>\n              <hr>\n            </div>\n            <div class=\"mb-3\">\n              <h5 class=\"fw-bold\">姓名</h5>\n              <p>{{ tempOrder.user.name }}</p>\n              <hr>\n            </div>\n            <div class=\"mb-3\">\n              <h5 class=\"fw-bold\">收件人電話</h5>\n              <p>{{ tempOrder.user.tel }}</p>\n              <hr>\n            </div>\n            <div class=\"mb-3\">\n              <h5 class=\"fw-bold\">收件人地址</h5>\n              <p>{{ tempOrder.user.address }}</p>\n              <hr>\n            </div>\n            <div class=\"mb-3\">\n              <h5 class=\"fw-bold\">備註</h5>\n              <p>{{ tempOrder.message }}</p>\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-dark btn-hover rounded-0\" data-bs-dismiss=\"modal\">關閉</button>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- DelOrderModal -->\n    <div class=\"modal fade\" id=\"delOrderModal\" tabindex=\"-1\" role=\"dialog\"\n      aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\" ref=\"delOrderModal\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content border-0\">\n          <div class=\"modal-header bg-dark text-white\">\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n              <span>刪除訂單</span>\n            </h5>\n            <button type=\"button\" class=\"btn-close btn-close-white\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n          </div>\n          <div class=\"modal-body\">\n            是否刪除 <strong class=\"text-strong\">{{ tempOrder.id }}</strong> 訂單(刪除後將無法恢復)。\n          </div>\n          <div class=\"modal-footer\">\n            <button type=\"button\" class=\"btn btn-outline-dark btn-hover rounded-0\" data-bs-dismiss=\"modal\">取消</button>\n            <button type=\"button\" class=\"btn btn-dark btn-hover rounded-0\" @click=\"delOrder\">確認刪除</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal.js'\nimport Pagination from '@/components/Pagination.vue'\n\nexport default {\n  name: 'Orders',\n  components: {\n    Pagination\n  },\n  data () {\n    return {\n      orders: {},\n      tempOrder: {\n        user: {}\n      },\n      pagination: {},\n      isLoading: false,\n      isNew: false,\n      orderModal: '',\n      delOrderModal: ''\n    }\n  },\n  methods: {\n    getOrders (Page = 1) {\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/orders?page=${Page}`\n      this.isLoading = true\n      this.$http.get(api).then((response) => {\n        if (response.data.success) {\n          this.orders = response.data.orders\n          this.pagination = response.data.pagination\n          this.isLoading = false\n        }\n      })\n    },\n    delOrder () {\n      const api = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/admin/order/${this.tempOrder.id}`\n      this.isLoading = true\n      this.$http.delete(api).then((response) => {\n        if (response.data.success) {\n          this.emitter.emit('message:push', { message: response.data.message, status: 'danger' })\n          this.getOrders()\n          this.delOrderModal.hide()\n          this.isLoading = false\n        }\n      })\n    },\n    openOrderModal (item) {\n      this.tempOrder = item\n      this.orderModal.show()\n    },\n    openDelModal (item) {\n      this.tempOrder = item\n      this.delOrderModal.show()\n    }\n  },\n  created () {\n    this.getOrders()\n  },\n  mounted () {\n    this.orderModal = new Modal(this.$refs.orderModal)\n    this.delOrderModal = new Modal(this.$refs.delOrderModal)\n  }\n}\n</script>\n","import { render } from \"./Orders.vue?vue&type=template&id=20366a4c\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}