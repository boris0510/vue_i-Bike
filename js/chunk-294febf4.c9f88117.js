(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-294febf4"],{b0c0:function(t,e,c){var i=c("83ab"),a=c("9bf2").f,l=Function.prototype,s=l.toString,d=/^\s*function ([^ (]*)/,n="name";i&&!(n in l)&&a(l,n,{configurable:!0,get:function(){try{return s.call(this).match(d)[1]}catch(t){return""}}})},d69e:function(t,e,c){"use strict";c.r(e);c("b0c0");var i=c("7a23"),a={class:"orders mt-4"},l={class:"table-responsive-lg mt-4"},s={class:"table table-striped lh-lg"},d=Object(i["i"])("thead",{class:"table-dark"},[Object(i["i"])("tr",{class:"table-nowrap"},[Object(i["i"])("th",{width:"150",class:"text-center"},"購買時間"),Object(i["i"])("th",{width:"200",class:"text-center"},"訂單編號"),Object(i["i"])("th",{width:"200",class:"text-center"},"Email"),Object(i["i"])("th",{class:"text-center"},"購買項目"),Object(i["i"])("th",{width:"150",class:"text-end"},"應付金額"),Object(i["i"])("th",{width:"150",class:"text-center"},"是否付款"),Object(i["i"])("th",{width:"180",class:"text-center"},"編輯")])],-1),n={class:"text-center"},r={class:"list-unstyled"},b={class:"text-end"},o={key:0,class:"text-strong"},O={key:1,class:"text-muted"},j={class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"orderModal"},u={class:"modal-dialog",role:"document"},h={class:"modal-content"},p={class:"modal-header bg-dark text-white"},m={class:"modal-title fw-bold",id:"exampleModalLabel"},f=Object(i["h"])("訂單資訊 "),g={class:"fs-6"},v=Object(i["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),w={class:"modal-body"},x={class:"mb-3"},y=Object(i["i"])("h5",{class:"fw-bold"},"訂購日期",-1),k=Object(i["i"])("hr",null,null,-1),M={class:"mb-3"},I=Object(i["i"])("h5",{class:"fw-bold"},"商品",-1),L={class:"row"},$={class:"col-6"},C={class:"col-6"},D={class:"text-end"},_={class:"text-end"},E=Object(i["i"])("hr",null,null,-1),N={class:"mb-3"},P=Object(i["i"])("h5",{class:"fw-bold"},"Email",-1),F=Object(i["i"])("hr",null,null,-1),T={class:"mb-3"},q=Object(i["i"])("h5",{class:"fw-bold"},"姓名",-1),J=Object(i["i"])("hr",null,null,-1),S={class:"mb-3"},U=Object(i["i"])("h5",{class:"fw-bold"},"收件人電話",-1),z=Object(i["i"])("hr",null,null,-1),A={class:"mb-3"},B=Object(i["i"])("h5",{class:"fw-bold"},"收件人地址",-1),G=Object(i["i"])("hr",null,null,-1),H={class:"mb-3"},K=Object(i["i"])("h5",{class:"fw-bold"},"備註",-1),Q=Object(i["i"])("div",{class:"modal-footer"},[Object(i["i"])("button",{type:"button",class:"btn btn-dark btn-hover rounded-0","data-bs-dismiss":"modal"},"關閉")],-1),R={class:"modal fade",id:"delOrderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"delOrderModal"},V={class:"modal-dialog",role:"document"},W={class:"modal-content border-0"},X=Object(i["i"])("div",{class:"modal-header bg-dark text-white"},[Object(i["i"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(i["i"])("span",null,"刪除訂單")]),Object(i["i"])("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Y={class:"modal-body"},Z=Object(i["h"])(" 是否刪除 "),tt={class:"text-strong"},et=Object(i["h"])(" 訂單(刪除後將無法恢復)。 "),ct={class:"modal-footer"},it=Object(i["i"])("button",{type:"button",class:"btn btn-outline-dark btn-hover rounded-0","data-bs-dismiss":"modal"},"取消",-1);function at(t,e,c,at,lt,st){var dt=Object(i["F"])("Loading"),nt=Object(i["F"])("Pagination");return Object(i["w"])(),Object(i["e"])("div",a,[Object(i["i"])(dt,{active:lt.isLoading,"onUpdate:active":e[1]||(e[1]=function(t){return lt.isLoading=t})},null,8,["active"]),Object(i["i"])("div",l,[Object(i["i"])("table",s,[d,Object(i["i"])("tbody",n,[(Object(i["w"])(!0),Object(i["e"])(i["a"],null,Object(i["D"])(lt.orders,(function(e,c){return Object(i["w"])(),Object(i["e"])("tr",{class:["table-nowrap",{"text-black-50":!e.is_paid}],key:c},[Object(i["i"])("td",null,Object(i["I"])(t.$filters.date(e.create_at)),1),Object(i["i"])("td",null,Object(i["I"])(e.id),1),Object(i["i"])("td",null,[e.user?(Object(i["w"])(),Object(i["e"])("span",{key:0,textContent:Object(i["I"])(e.user.email)},null,8,["textContent"])):Object(i["f"])("",!0)]),Object(i["i"])("td",null,[Object(i["i"])("ul",r,[(Object(i["w"])(!0),Object(i["e"])(i["a"],null,Object(i["D"])(e.products,(function(t,e){return Object(i["w"])(),Object(i["e"])("li",{key:e},Object(i["I"])(t.product.title)+" "+Object(i["I"])(t.qty)+" "+Object(i["I"])(t.product.unit),1)})),128))])]),Object(i["i"])("td",b,"NT$ "+Object(i["I"])(t.$filters.currency(e.total)),1),Object(i["i"])("td",null,[e.is_paid?(Object(i["w"])(),Object(i["e"])("span",o,"已付款")):(Object(i["w"])(),Object(i["e"])("span",O,"尚未付款"))]),Object(i["i"])("td",null,[Object(i["i"])("button",{type:"button",class:"btn btn-dark btn-hover rounded-0 me-2",onClick:function(t){return st.openOrderModal(e)}}," 查看詳細 ",8,["onClick"]),Object(i["i"])("button",{type:"button",class:"btn btn-outline-dark btn-hover rounded-0",onClick:function(t){return st.openDelModal(e)}}," 刪除 ",8,["onClick"])])],2)})),128))])])]),Object(i["i"])(nt,{pages:lt.pagination,onEmitPages:st.getOrders},null,8,["pages","onEmitPages"]),Object(i["i"])("div",j,[Object(i["i"])("div",u,[Object(i["i"])("div",h,[Object(i["i"])("div",p,[Object(i["i"])("h4",m,[f,Object(i["i"])("span",g,"( "+Object(i["I"])(lt.tempOrder.id)+" )",1)]),v]),Object(i["i"])("div",w,[Object(i["i"])("div",x,[y,Object(i["i"])("p",null,Object(i["I"])(t.$filters.date(lt.tempOrder.create_at)),1),k]),Object(i["i"])("div",M,[I,(Object(i["w"])(!0),Object(i["e"])(i["a"],null,Object(i["D"])(lt.tempOrder.products,(function(e){return Object(i["w"])(),Object(i["e"])("div",{key:e.id},[Object(i["i"])("div",L,[Object(i["i"])("div",$,[Object(i["i"])("p",null,Object(i["I"])(e.product.title)+" "+Object(i["I"])(e.qty)+" "+Object(i["I"])(e.product.unit),1)]),Object(i["i"])("div",C,[Object(i["i"])("p",D,"NT$ "+Object(i["I"])(t.$filters.currency(e.final_total))+" 元",1)])])])})),128)),Object(i["i"])("p",_,"總價: NT$ "+Object(i["I"])(t.$filters.currency(lt.tempOrder.total))+" 元",1),E]),Object(i["i"])("div",N,[P,Object(i["i"])("p",null,Object(i["I"])(lt.tempOrder.user.email),1),F]),Object(i["i"])("div",T,[q,Object(i["i"])("p",null,Object(i["I"])(lt.tempOrder.user.name),1),J]),Object(i["i"])("div",S,[U,Object(i["i"])("p",null,Object(i["I"])(lt.tempOrder.user.tel),1),z]),Object(i["i"])("div",A,[B,Object(i["i"])("p",null,Object(i["I"])(lt.tempOrder.user.address),1),G]),Object(i["i"])("div",H,[K,Object(i["i"])("p",null,Object(i["I"])(lt.tempOrder.message),1)])]),Q])])],512),Object(i["i"])("div",R,[Object(i["i"])("div",V,[Object(i["i"])("div",W,[X,Object(i["i"])("div",Y,[Z,Object(i["i"])("strong",tt,Object(i["I"])(lt.tempOrder.id),1),et]),Object(i["i"])("div",ct,[it,Object(i["i"])("button",{type:"button",class:"btn btn-dark btn-hover rounded-0",onClick:e[2]||(e[2]=function(){return st.delOrder&&st.delOrder.apply(st,arguments)})},"確認刪除")])])])],512)])}c("99af");var lt=c("7c2b"),st=c.n(lt),dt=c("1799"),nt={name:"Orders",components:{Pagination:dt["a"]},data:function(){return{orders:{},tempOrder:{user:{}},pagination:{},isLoading:!1,isNew:!1,orderModal:"",delOrderModal:""}},methods:{getOrders:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ibike","/admin/orders?page=").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){e.data.success&&(t.orders=e.data.orders,t.pagination=e.data.pagination,t.isLoading=!1)}))},delOrder:function(){var t=this,e="".concat("https://vue3-course-api.hexschool.io","/api/").concat("ibike","/admin/order/").concat(this.tempOrder.id);this.isLoading=!0,this.$http.delete(e).then((function(e){e.data.success&&(t.emitter.emit("message:push",{message:e.data.message,status:"danger"}),t.getOrders(),t.delOrderModal.hide(),t.isLoading=!1)}))},openOrderModal:function(t){this.tempOrder=t,this.orderModal.show()},openDelModal:function(t){this.tempOrder=t,this.delOrderModal.show()}},created:function(){this.getOrders()},mounted:function(){this.orderModal=new st.a(this.$refs.orderModal),this.delOrderModal=new st.a(this.$refs.delOrderModal)}};nt.render=at;e["default"]=nt}}]);
//# sourceMappingURL=chunk-294febf4.c9f88117.js.map